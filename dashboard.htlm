<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>CTOS Dashboard</title>

    <style>
        body {
            background:#0b0f14;
            color:white;
            font-family:Arial;
            padding:10px;
        }
        .box {
            border:1px solid #38bdf8;
            padding:10px;
            margin-bottom:10px;
        }
        button {
            margin-right:5px;
        }
    </style>
</head>
<body>

<div class="box">
    <strong>ğŸ›ï¸ Centre de contrÃ´le</strong><br><br>
    <button onclick="changeZone('Cotonou')">Cotonou</button>
    <button onclick="changeZone('Porto-Novo')">Porto-Novo</button>
    <button onclick="changeZone('Parakou')">Parakou</button>
</div>

<div class="box" id="securityBox">
    <strong>ğŸ‘ï¸ Niveau de sÃ©curitÃ©</strong><br><br>
    <div id="securityLevel" style="font-size:18px;">
        Initialisation...
    </div>
</div>

<div class="box">
    <strong id="zoneTitle">Chargement...</strong>
</div>

<div class="box" id="mapBox">
    <strong id="zoneTitleMap">ğŸ—ºï¸ Carte CTOS</strong><br><br>
 <div id="mapArea" style="
    height:180px;
    border:2px dashed #38bdf8;
    padding:8px;
    color:#38bdf8;
">
    <div id="alertsMap">Aucune alerte active</div>
</div>
</div>

<div class="box">
    <strong>ğŸ“œ Journal</strong>
    <div id="logs"></div>
</div>

<div class="box" id="statsBox">
    <strong>ğŸ“Š Statistiques</strong><br><br>
    <div id="statsContent">
        Total alertes : 0<br>
        ğŸŸ¢ Incident mineur : 0<br>
        ğŸŸ¡ Mouvement suspect : 0<br>
        ğŸ”´ Intrusion dÃ©tectÃ©e : 0
    </div>
</div>
<script>
let zoneActive = "Cotonou";

let stats = {
    total: 0,
    "Incident mineur": 0,
    "Mouvement suspect": 0,
    "Intrusion dÃ©tectÃ©e": 0
};

function updateStats(type){
    stats.total += 1;
    stats[type] += 1;

    document.getElementById("statsContent").innerHTML =
        `Total alertes : ${stats.total}<br>` +
        `ğŸŸ¢ Incident mineur : ${stats["Incident mineur"]}<br>` +
        `ğŸŸ¡ Mouvement suspect : ${stats["Mouvement suspect"]}<br>` +
        `ğŸ”´ Intrusion dÃ©tectÃ©e : ${stats["Intrusion dÃ©tectÃ©e"]}`;
}

function updateZone(){
    document.getElementById("zoneTitle").innerText =
        "ğŸ—ºï¸ CTOS â€” Zone " + zoneActive;

    document.getElementById("zoneTitleMap").innerText =
        "ğŸ—ºï¸ Carte CTOS â€” " + zoneActive;

    addLog("Zone active : " + zoneActive);
}

function changeZone(ville){
    zoneActive = ville;
    updateZone();
}

function addLog(msg){
    document.getElementById("logs").innerHTML += msg + "<br>";
}
let alertLevels = [
    {type:"Incident mineur", level:"ğŸŸ¢", color:"#22c55e"},
    {type:"Mouvement suspect", level:"ğŸŸ¡", color:"#eab308"},
    {type:"Intrusion dÃ©tectÃ©e", level:"ğŸ”´", color:"#ef4444"}
];

function generateAlert(){
    let a = alertLevels[Math.floor(Math.random()*alertLevels.length)];

    let alertHTML = `
        <div style="color:${a.color}; font-weight:bold;">
            ${a.level} ${a.type} â€” ${zoneActive}
        </div>
    `;

    document.getElementById("alertsMap").innerHTML = alertHTML;
    addLog("Alerte gÃ©nÃ©rÃ©e : " + a.type + " (" + zoneActive + ")");

    updateSecurityLevel(a.type);
    updateStats(a.type);
}
function updateSecurityLevel(type){
    let levelText = "FAIBLE";
    let color = "#22c55e";

    if(type === "Mouvement suspect"){
        levelText = "MOYEN";
        color = "#eab308";
    }

    if(type === "Intrusion dÃ©tectÃ©e"){
        levelText = "Ã‰LEVÃ‰";
        color = "#ef4444";
    }

    let el = document.getElementById("securityLevel");
    el.innerText = levelText;
    el.style.color = color;
}
setInterval(generateAlert, 5000);
updateZone();
</script>

</body>
</html>
